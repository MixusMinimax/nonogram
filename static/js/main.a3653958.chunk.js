(this.webpackJsonpnonogram=this.webpackJsonpnonogram||[]).push([[0],{16:function(t,e,s){},17:function(t,e,s){},18:function(t,e,s){},20:function(t,e,s){"use strict";s.r(e);var a,i=s(1),n=s.n(i),r=s(9),o=s.n(r),c=(s(16),s(2)),l=s(3),h=s(5),d=s(4),u=(s(17),s(10)),g=s(8),f=s(11),m=(s(18),s(0));!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(a||(a={}));var p=function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).reset(t,!1),a}return Object(l.a)(s,[{key:"reset",value:function(t){for(var e=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={health:{current:t.health,max:t.health},fields:[],segments:{columns:[],rows:[]},dragging:!1,dragStart:{x:0,y:0},dragButton:0,lastDraggedCell:0},n=0;n<t.height;++n){i.fields.push([]);for(var r=0;r<t.width;++r)i.fields[n].push({x:r,y:n,completed:!1,wrong:!1,state:t.initializedStates[n][r]?t.solution[n][r]?"marked":"unmarked":"none"})}var o=[a.X,a.Y].map((function(t){return Array.from(Array(e.props[t==a.X?"height":"width"]),(function(s,i){for(var n=[],r=!1,o=0;o<e.props[t==a.X?"width":"height"];++o){var c=t==a.X?e.props.solution[i][o]:e.props.solution[o][i];c&&r?n[n.length-1].size++:c&&n.push({size:1,completed:!1}),r=c}return n}))})),c=Object(f.a)(o,2);i.segments.rows=c[0],i.segments.columns=c[1],s?this.setState(this.state):this.state=i;for(n=0;n<t.height;++n)for(r=0;r<t.width;++r)t.initializedStates[n][r]&&this.updateSegments(r,n,!1)}},{key:"markCell",value:function(t,e,s){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("none"==this.state.fields[e][t].state)if(0!=this.state.health.current){var n;switch(s){case 0:n="marked";break;case 2:n="unmarked";break;default:return}var r=this.props.solution[e][t]?"marked":"unmarked";this.state.fields[e][t].state=r,r!=n&&(this.state.fields[e][t].wrong=!0,this.setState({dragging:!1,health:Object(g.a)(Object(g.a)({},this.state.health),{},{current:this.state.health.current-1})})),a&&this.setState({fields:this.state.fields}),this.updateSegments(t,e,a,i)}else this.setState({dragging:!1})}},{key:"updateSegments",value:function(t,e){for(var s=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=function(){for(var r=c[o],l=!0,h=r==a.X?e:t,d=r==a.X?s.props.width:s.props.height,g=function(t,e,s){return r==a.X?t[s][e]:t[e][s]},f=0;f<d;++f)if(g(s.props.solution,f,h)&&"marked"!=g(s.state.fields,f,h).state){l=!1;break}if(l){var m,p=Object(u.a)(s.state.segments[r==a.X?"rows":"columns"][h]);try{for(p.s();!(m=p.n()).done;){m.value.completed=!0}}catch(k){p.e(k)}finally{p.f()}s.props.cascade&&n&&(s.cascade(t,e,r,!0,20,i),s.cascade(t,e,r,!1,20,i),s.state.dragging&&i&&r==s.state.dragDirection&&s.setState({dragging:!1}))}else for(var v=0;v<2;++v)for(var j=s.state.segments[r==a.X?"rows":"columns"][h],b=0,x=0,O=0;O<d;++O){var y=O,S=b;if(1==v&&(y=d-1-O,S=j.length-1-b),"marked"==g(s.state.fields,y,h).state)x++;else if(x==j[S].size&&(j[S].completed=!0,++b),x=0,"none"==g(s.state.fields,y,h).state)break}},o=0,c=[a.X,a.Y];o<c.length;o++)r();i&&this.setState({segments:this.state.segments})}},{key:"cascade",value:function(t,e,s,i,n){var r=this,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t<0||t>=this.props.width||e<0||e>=this.props.height)){o&&(this.state.fields[e][t].completed=!0,this.setState({fields:this.state.fields}),setTimeout((function(){r.state.fields[e][t].completed=!1,r.setState({fields:r.state.fields})}),1e3)),this.markCell(t,e,2,o,!1);var c=(s==a.X?1:0)*(i?1:-1),l=(s==a.X?0:1)*(i?1:-1);o?setTimeout((function(){r.cascade(t+c,e+l,s,i,n,o)}),n):this.cascade(t+c,e+l,s,i,n,o)}}},{key:"mouseDown",value:function(t,e,s){s.preventDefault(),this.setState({dragStart:{x:t,y:e},dragButton:s.button,dragging:!0}),this.markCell(t,e,s.button)}},{key:"mouseUp",value:function(t){t.preventDefault(),this.setState({dragging:!1,dragDirection:void 0})}},{key:"mouseMove",value:function(t,e){if(this.state.dragging){if(void 0===this.state.dragDirection&&(t!=this.state.dragStart.x||e!=this.state.dragStart.y)){var s=t===this.state.dragStart.x?a.Y:a.X;this.setState({dragDirection:s}),this.setState({lastDraggedCell:s===a.X?this.state.dragStart.x:this.state.dragStart.y})}if(void 0===this.state.dragDirection)return;var i={x:t,y:e};this.state.dragDirection===a.X?i.y=this.state.dragStart.y:i.x=this.state.dragStart.x;for(var n=this.state.lastDraggedCell,r=this.state.dragDirection===a.X?t:e,o=r<n?-1:1,c=n+o;n!=r&&(c-r)*o<0;c+=o)this.state.dragDirection===a.X?(t=c,e=i.y):(t=i.x,e=c),this.markCell(t,e,this.state.dragButton);this.setState({lastDraggedCell:this.state.dragDirection===a.X?i.x:i.y}),this.markCell(i.x,i.y,this.state.dragButton)}}},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{children:["Field works! Dimensions:",this.props.width,"x",this.props.height]}),Object(m.jsx)("div",{className:"health",children:Array.from(Array(this.state.health.max),(function(e,s){return Object(m.jsx)("div",{className:"heart",children:s<t.state.health.current?"\u2764\ufe0f":"\ud83e\udd0d"})}))}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),this.state.segments.columns.map((function(t){return Object(m.jsx)("th",{children:Object(m.jsxs)("div",{className:"segment ".concat(t.every((function(t){return t.completed}))?"completed":""),children:[" ",t.map((function(t){return Object(m.jsx)("div",{className:"segment-number ".concat(t.completed?"completed":""),children:t.size})}))," "]})})}))]})}),Object(m.jsx)("tbody",{onMouseLeave:function(e){return t.mouseUp(e)},children:this.state.fields.map((function(e,s){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{onMouseEnter:function(e){return t.mouseUp(e)},children:Object(m.jsxs)("div",{className:"segment ".concat(t.state.segments.rows[s].every((function(t){return t.completed}))?"completed":""),children:[" ",t.state.segments.rows[s].map((function(t){return Object(m.jsx)("div",{className:"segment-number ".concat(t.completed?"completed":""),children:t.size})}))," "]})}),e.map((function(e){return Object(m.jsx)("td",{onMouseDown:function(s){return t.mouseDown(e.x,e.y,s)},onMouseUp:function(e){return t.mouseUp(e)},onMouseMove:function(){return t.mouseMove(e.x,e.y)},children:Object(m.jsxs)("div",{className:"field-cell ".concat(e.state," ").concat(e.wrong?"wrong":""," ").concat(e.completed?"completed":""),children:[Object(m.jsx)("div",{className:"x",children:"\u2573"}),Object(m.jsx)("div",{className:"overlay"})]})})}))]})}))})]})]})}}]),s}(i.Component);p.defaultProps={cascade:!1,health:5};var v=p,j=function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={solution:[[!0,!0,!1,!1,!0,!0,!0],[!1,!0,!1,!0,!0,!1,!1],[!1,!0,!0,!0,!0,!1,!0],[!0,!1,!0,!1,!1,!1,!0],[!0,!1,!0,!1,!1,!1,!1],[!1,!0,!1,!0,!1,!0,!0],[!0,!1,!1,!1,!0,!1,!1]],initializedStates:[[!1,!1,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!0,!1],[!1,!1,!1,!1,!1,!1,!0],[!1,!1,!1,!1,!1,!0,!1],[!1,!1,!1,!1,!0,!1,!1],[!0,!1,!1,!0,!0,!1,!1]]},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("div",{onContextMenu:function(t){t.preventDefault()},className:"App",children:[Object(m.jsx)("h1",{children:"Hello, World!"}),Object(m.jsx)(v,{width:7,height:7,initializedStates:this.state.initializedStates,solution:this.state.solution,cascade:!0})]})}}]),s}(i.Component),b=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,21)).then((function(e){var s=e.getCLS,a=e.getFID,i=e.getFCP,n=e.getLCP,r=e.getTTFB;s(t),a(t),i(t),n(t),r(t)}))};o.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(j,{})}),document.getElementById("root")),b()}},[[20,1,2]]]);
//# sourceMappingURL=main.a3653958.chunk.js.map